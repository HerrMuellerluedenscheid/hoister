# .github/workflows/build-all.yml
name: Build All Services

on:
  push:
    branches: [ "main" ]

jobs:
  build-hoister:
    uses: ./.github/workflows/docker-build-reusable.yml
    with:
      context: .
      dockerfile: agent/Dockerfile
      image_name: emrius11/hoister
    secrets:
      registry_password: ${{ secrets.DOCKERHUB_PASSWORD }}

  build-controller:
    uses: ./.github/workflows/docker-build-reusable.yml
    with:
      context: .
      dockerfile: controller/Dockerfile
      image_name: emrius11/hoister-controller
    secrets:
      registry_password: ${{ secrets.DOCKERHUB_PASSWORD }}

  build-frontend:
    uses: ./.github/workflows/docker-build-reusable.yml
    with:
      context: frontend
      dockerfile: frontend/Dockerfile
      image_name: emrius11/hoister-frontend
    secrets:
      registry_password: ${{ secrets.DOCKERHUB_PASSWORD }}